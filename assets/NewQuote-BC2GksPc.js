import{j as e,r as s,d as j,b as _,u as g}from"./index-Cvzl7uDc.js";import{u as b,b as v}from"./api-D3z0bM80.js";const N="_card_1kzig_1",F={card:N},Q=t=>e.jsx("div",{className:F.card,children:t.children}),S="_form_p4a23_1",A="_loading_p4a23_5",E="_control_p4a23_15",R="_actions_p4a23_43",n={form:S,loading:A,control:E,actions:R},k=t=>{const[a,o]=s.useState(!1),[c,d]=s.useState(!1),l=s.useRef(),m=s.useRef();let r=j(({currentLocation:i,nextLocation:u})=>a&&i.pathname!==u.pathname&&!c);const{state:f}=r;s.useEffect(()=>{f==="blocked"&&(window.confirm("Are you sure?")?r.proceed():r.reset())},[f,r]);function x(i){d(!0),i.preventDefault();const u=l.current.value,p=m.current.value;t.onAddQuote({author:u,text:p})}const h=()=>{o(!0),console.log("FOCUS!")};return e.jsx(Q,{children:e.jsxs("form",{onFocus:h,className:n.form,onSubmit:x,children:[t.isLoading&&e.jsx("div",{className:n.loading,children:e.jsx(_,{})}),e.jsxs("div",{className:n.control,children:[e.jsx("label",{htmlFor:"author",children:"Author"}),e.jsx("input",{type:"text",id:"author",ref:l})]}),e.jsxs("div",{className:n.control,children:[e.jsx("label",{htmlFor:"text",children:"Text"}),e.jsx("textarea",{id:"text",rows:"5",ref:m})]}),e.jsx("div",{className:n.actions,children:e.jsx("button",{className:"btn",children:"Add Quote"})})]})})},I=()=>{const t=g(),{sendRequest:a,status:o}=b(v);s.useEffect(()=>{o==="completed"&&t("/quotes")},[o,t]);const c=d=>{a(d)};return e.jsx(k,{isLoading:o==="pending",onAddQuote:c})};export{I as default};
