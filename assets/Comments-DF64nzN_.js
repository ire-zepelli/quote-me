import{r as a,j as e,b as x,c as j}from"./index-Cvzl7uDc.js";import{u as h,c as f,d as _}from"./api-D3z0bM80.js";const C="_comments_10gs7_1",p={comments:C},N="_form_10hnu_1",g="_loading_10hnu_7",b="_control_10hnu_17",A="_actions_10hnu_43",u={form:N,loading:g,control:b,actions:A},v=t=>{const o=a.useRef(),{sendRequest:r,status:s,error:m}=h(f),{onAddedComment:c}=t;a.useEffect(()=>{s==="completed"&&!m&&c()},[s,m,c]);const n=l=>{l.preventDefault();const i=o.current.value;r({commentData:{text:i},quoteId:t.quoteId})};return e.jsxs("form",{className:u.form,onSubmit:n,children:[s==="pending"&&e.jsx("div",{className:"centered",children:e.jsx(x,{})}),e.jsxs("div",{className:u.control,onSubmit:n,children:[e.jsx("label",{htmlFor:"comment",children:"Your Comment"}),e.jsx("textarea",{id:"comment",rows:"5",ref:o})]}),e.jsx("div",{className:u.actions,children:e.jsx("button",{className:"btn",children:"Add Comment"})})]})},q="_item_1uyaz_1",I={item:q},R=t=>e.jsx("li",{className:I.item,children:e.jsx("p",{children:t.text})}),E="_comments_1hhzv_1",H={comments:E},S=t=>e.jsx("ul",{className:H.comments,children:t.comments.map(o=>e.jsx(R,{text:o.text},o.id))}),F=()=>{const[t,o]=a.useState(!1),r=j(),{quoteId:s}=r,{sendRequest:m,status:c,data:n}=h(_);a.useEffect(()=>{m(s)},[s,m]);const l=()=>{o(!0)},i=a.useCallback(()=>{m(s)},[m,s]);let d;return c==="pending"&&(d=e.jsx("div",{className:"centered",children:e.jsx(x,{})})),c==="completed"&&n&&n.length>0&&(d=e.jsx(S,{comments:n})),c==="completed"&&(!n||n.length===0)&&(d=e.jsx("p",{className:"centered",children:"No comments were added yet!"})),e.jsxs("section",{className:p.comments,children:[e.jsx("h2",{children:"User Comments"}),!t&&e.jsx("button",{className:"btn",onClick:l,children:"Add a Comment"}),t&&e.jsx(v,{quoteId:s,onAddedComment:i}),d]})};export{F as default};
